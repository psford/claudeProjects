Hi Claude,

This file will be used to keep track of rules, best practices, and all of the other details that will guide our work together. You should add additional entries and refer back to them as I give you feedback.

My background is a longtime financial services business analyst, who has programmed in Matlab and dabbled in Python, Ruby, and a few others. As we work together, my preferred languages for projects are Python, Typescript, HTML and CSS.

# guidelines

1. All documentation should be written in Github flavored Markdown.
2. Create new sections or subsections to this document as needed, but version history is important.
3. If you need additional tooling, let me know, and provide me with detailed options.
4. Math must be correct. If there is any doubt that you can provide an accurate result out to 5 decimal places of precision in a calculation you must let me know.
5. Challenge me. If I ask you to do something that is against best practices or could introduce a security vulnerabilty I need to know.
6. When suggesting a particular programming language or approach, give me a few alternatives as well, with arguments for the option you chose.
7. You don't have my credit card number, but even so - never sign me up for any paid service.
8. If you need logins to sites like Github, let me know, but make sure you give me detailed instructions so that you have access to the account. I'm not going to give you my passwords.
9. You will not ever act illegally.
10. Wherever possible, you will cite sources so I can understand the background of your suggestions.
11. When updating CLAUDE.md, save a versioned backup copy using the format `claude_MMDDYYYY-N.md` where N is the commit number for that day, incrementing with each commit (e.g., `claude_01132026-1.md` for the first commit, `claude_01132026-2.md` for the second commit, etc.).
12. Log terminal action summaries to `claudeLog.md`. Include date, action description, and result (success/failure). Omit sensitive data. If the file exceeds 1GB, archive it using the date convention (`claudeLog_MMDDYYYY.md`) and start a new `claudeLog.md`.
13. Naming conventions: use `camelCase` for JavaScript/TypeScript; use `snake_case` for Python (per PEP 8).
14. Session commands:
    - **"night!"** — Save state: update `sessionState.md` with current context, commit all changes
    - **"hello!"** — Restore state: read `CLAUDE.md`, `sessionState.md`, `claudeLog.md`, and `dependencies.md` to reload prior context
15. Test before completion: Always verify that UI and functional changes work as intended before reporting them as complete. For web interfaces, this means actually testing the user flow, not just checking that code compiles or imports correctly.
16. Commit freely: No need to ask permission before committing changes. Commit as part of the normal workflow, as long as rollback capability is maintained via git history.

# known issues

## yfinance dividend yield data

**Issue:** The `dividendYield` field from yfinance can return inconsistent values. For example, AAPL showed 40% dividend yield when the actual value is ~0.4%.

**Cause:** yfinance sometimes returns dividend yield as a decimal (0.004 = 0.4%) and other times as a larger value that doesn't need multiplication. The data comes from Yahoo Finance and can be inconsistent.

**Fix (implemented):** In `stock_analysis/stock_analyzer.py`, the `get_stock_info()` function validates the dividend yield:

```python
# Validate dividend yield - yfinance can return inconsistent values
# Expected format: decimal (0.004 = 0.4%), but sometimes returns 100x higher
raw_yield = info.get("dividendYield", "N/A")
if isinstance(raw_yield, (int, float)):
    if raw_yield > 0.10:
        # Value > 10% is likely inflated by 100x, correct it
        dividend_yield = raw_yield / 100
    else:
        dividend_yield = raw_yield
else:
    dividend_yield = "N/A"
```

**Status:** Implemented 01/13/2026 - AAPL now correctly shows 0.40% dividend yield
